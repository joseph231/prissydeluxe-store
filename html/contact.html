<!doctype html>
<html lang="en">
<link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact — PRISSYDELUXE</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/auth.css">
  <script type="module" src="../supabase.js" defer></script>
  <script src="../js/ui/components.js" defer></script>
  <script src="../js/auth/session.js" defer></script>
</head>

<body>
  <div id="navbar"></div>

  <section class="page-hero" style="background-image:url('../assets/images/backgrounds/bg-3.jpg')"
    aria-label="Contact hero">
    <div class="hero-inner">
      <img src="../assets/images/logo.png" class="page-hero-logo" alt="PRISSYDELUXE">
      <h1>Contact Us</h1>
      <p>We’ll respond within 48 hours — account required to contact.</p>
    </div>
  </section>

  <main class="container content-section" style="padding-top:36px">
    <div style="max-width:920px;margin:0 auto">
      <form id="contactForm" class="auth-card" style="background:#fff;margin-bottom:40px">
        <h2>Send a message</h2>
        <div class="auth-field">
          <label for="c-name">Name</label>
          <input id="c-name" type="text" placeholder="Your name" required>
        </div>
        <div class="auth-field">
          <label for="c-email">Email</label>
          <input id="c-email" type="email" placeholder="you@example.com" required>
        </div>
        <div class="auth-field">
          <label for="c-msg">Message</label>
          <textarea id="c-msg" rows="6" placeholder="Write your message..." required></textarea>
        </div>
        <div style="display:flex;gap:12px">
          <button id="contactSend" class="auth-btn" type="button">Send Message</button>
          <button id="contactCancel" class="auth-btn" type="button" style="background:#ccc;color:#111">Cancel</button>
        </div>
        <div id="contactResult" style="margin-top:12px;text-align:center"></div>
      </form>
    </div>
  </main>

  <div id="footer"></div>

  <script>
    (async () => {
      // Protect page
      await window.pdUI?.requireAuthRedirect?.();

      const send = document.getElementById('contactSend');
      const cancel = document.getElementById('contactCancel');
      const result = document.getElementById('contactResult');

      send.addEventListener('click', async () => {
        const name = document.getElementById('c-name').value.trim();
        const email = document.getElementById('c-email').value.trim();
        const msg = document.getElementById('c-msg').value.trim();
        if (!name || !email || !msg) { result.textContent = 'Complete all fields.'; return; }

        // Demo behavior: store to localStorage messages array (replace with backend call)
        const messages = JSON.parse(localStorage.getItem('pd_messages') || '[]');
        messages.push({ id: Date.now(), name, email, msg, created_at: new Date().toISOString() });
        localStorage.setItem('pd_messages', JSON.stringify(messages));
        result.textContent = 'Message queued. We will contact you via email.';
        setTimeout(() => result.textContent = '', 5000);
      });

      cancel.addEventListener('click', () => { document.getElementById('contactForm').reset(); });
    })();
  </script>
</body>

</html>